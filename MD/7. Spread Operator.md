# 점 3개의 위력. → 괄호 제거 하는 연산자.

**ES6 Spread Operator 라는 문법을 알아봅시다**

그냥 마침표를 연달아서 3개... 찍으시면 그게 spread operator라는 문법입니다.

**"괄호제거 해주는 연산자"** 입니다.

Array에 붙여보도록 합시다.

```sql
var 어레이 = ['hello', 'world'];
console.log(어레이);
console.log(...어레이);
```

그럼 어레이라는 array에 붙어있던 괄호를 제거해줍니다.

▲ 3번줄처럼 spread operator를 붙여서 출력해보시면 괄호가 제거된 **'hello', 'world'**만 콘솔창에 출력됩니다.

## 배열말고 문자열에도 가능?

문자열도 배열이과 성격이 매우 비슷함. 따라서 가능한데

문자에 붙이면 문자에 붙은 괄호를 제거해줍니다.

괄호가 어딨냐고요? 실은 문자도 array 자료형과 매우 비슷합니다. 안보이는 대괄호가 쳐져있다고 보시면 됩니다.

```sql
var 문자 = 'hello';
console.log(문자[0]);
console.log(문자[1]);
```

문자를 이런식으로 array처럼 출력할 수 있다는거 아셨습니까.

hello라는 문자에도 뭔가 대괄호 쳐있는 ['h', 'e', 'l', 'l', 'o'] 느낌이 납니다.

# 문자열도 배열과 비슷하기에 …하면 분리가 가능함!

그럼 문자에 spread를 붙이면 어떻게 될까요?

대괄호를 제거해줍니다.

```sql
var 문자 = 'hello';
console.log(문자);
console.log(...문자);
```

위 코드 셋째줄을 출력해보면 콘솔창에 h e l l o 라는 문자들이 출력됩니다.

**console.log('h', 'e', 'l', 'l', 'o')** 이렇게 한거랑 똑같다고 보시면 됩니다.

그래서 spread를 문자에 붙이면 알파벳을 하나씩 펼쳐줍니다.

**(혹은 그냥 문자의 안보이는 대괄호를 제거해준다고 외우세요)**

# Array Appending에 쓰이는 spread 연산자

**이걸 어디에 쓰냐면 1. Array 합치기/복사에 매우 자주 씁니다.**

여러분 array 두개를 합치고 싶으면 어떻게 합니까.

```csharp
var a = [1,2,3];
var b = [4,5];
var c = [여기엔 1,2,3,4,5 가 들어오게 만들려면?];
```

옛날엔 뭐 이상한 방식을 마구 썼는데 spread operator를 사용하시면 매우 쉽습니다.

그럼 이렇게 써볼게요.

### […a, …b ] → 새로운 배열 완성 대박!

```csharp
var a = [1,2,3];
var b = [4,5];
var c = [...a, ...b];
```

이렇게 한 뒤에 c라는 어레이를 출력해보면 [1,2,3,4,5]가 되어있습니다.

... 연산자를 이용해서 괄호를 없앤 a와 b를 집어넣는다는 소리입니다.

어레이 합치기 완성입니다. 매우 쉽습니다.

그럼 어레이 복사의 경우도 알아봅시다.

# Shallow Coping에 쓰이는 spread 연산자

▼ a라는 어레이를 복사해서 b를 만들고 싶으면 보통 이렇게 하지않을까요

```jsx
var a = [1, 2, 3];
var b = a;

console.log(a);
console.log(b);
```

등호 = 를 이용하시면 쉽게 a에 있던 값을 b에 집어넣을 수 있습니다. ( [1,2,3] 복사완료!)

**그런데 자바스크립트에선 복사를 이렇게 하시면 큰일납니다. → 값 공유**

등호로 복사를 하시면 a와 b 변수는 [1,2,3]을 각각 따로 하나씩 가진게 아니라 **값 공유**가 일어납니다

# 쉽게 말하면 독립적이지 않고 종속적인 두 배열이 만들어짐

그래서 a라는 array를 수정하면 b도 똑같이 바뀌는 신기한 버그가 일어납니다.

(나중에 자료형배울 때 다룰 것이지만 왜 그러냐면 등호쓰시면 값을 복사한게 아니라 **[1,2,3]** **값이 저기있어요~ 라고 가리키는 화살표**를 복사하신 것입니다.)

그래서 값을 공유하지 않고 각각 독립적인 값을 저장하도록

array를 복사하시려면 옛날엔 이상한 방법을 많이 썼는데

요즘은 spread를 이용하시면 되겠습니다.

```jsx
var a = [1, 2, 3];
var b = [...a];

console.log(a);
console.log(b);
```

spread를 이용해서 a값의 괄호를 제거해준 다음에 다시 괄호를 씌우는 겁니다.

그렇게 하시면 아까처럼 a와 b 변수의 값 공유가 일어나지 않습니다.

# Copying(shallow) 가능

여러분 object 두개를 합치고 싶으면 어떻게 합니까.

```
var o1 = { a : 1, b : 2 };
var o2 = { c : 3, 그리고 o1에 있는거 전부.. }
```

o2를 만들고 싶은데 o1에 있던 내용들을 그대로 가져다가 추가하고 싶습니다.

그럼 어떻게 해야되냐면 고민하지말고 spread operator를 떠올리시면 됩니다.

**이 연산자는 대괄호 뿐만아니라 중괄호도 제거해줍니다. ( 괄호는 싹 다 제거해줌)**

그래서 이렇게 쓰시면

```
var o1 = { a : 1, b : 2 };
var o2 = { c : 3, ...o1 };
console.log(o2);
```

o2라는 오브젝트를 출력해보면 a, b, c키값이 다 들어있습니다.

왜냐면 o1오브젝트를 spread 연산자를 이용해 괄호를 벗겨서 추가했기 때문입니다.

오브젝트 shallow copy도 비슷한 방식으로 합니다. (강의에선 deep copy라고 한거같은데 deep copy는 오브젝트 안의 오브젝트까지도 엮임현상없이 카피하는걸 뜻합니다. shallow는 그냥 맨 위의 오브젝트하나만 카피하는걸 뜻합니다)

어쨌든 결론은 오브젝트나 어레이나 spread를 유용하게 사용하실 수 있습니다.

# 오브젝트에서 같은 속성명에 있는것을 shallow COPY 하려면? → 결론 : 최신값으로 자동으로 적용해줌

**참고1.**

오브젝트의 key값 중복이 발생하면 어떻게될까요?

```
var o1 = { a : 1, b : 2};
var o2 = { a : 3, ...o1 };
console.log(o2);
```

o2를 o1항목을 추가해서 만들고 싶은데 a라는 키값이 이미 있는겁니다.

이렇게 a라는 값이 중복이 발생하면 **무조건 뒤에 오는 a가** 이깁니다.

그래서 출력해보면 a : 1 이라는 자료가 담겨져있습니다.

# 스프레드 연산자는 괄호 내에서 쓰자!

**참고2.**

spread 연산자는 함수소괄호, 오브젝트 중괄호내, 어레이 대괄호내에서 보통 사용하셔야합니다.

다른 곳에서 그냥 썼다간 에러가날 수 있습니다.

# 값이 독립적이니까 Deep Copy 아닌가요?

그렇게 보일수도 있으나 그렇지 않고 shallow copy.

✔️ **얕은 복사** (... 연산자)

• 객체가 단순한 구조일 때 (중첩 객체 X)

• 객체의 최상위 속성만 수정할 때

• 성능이 중요한 경우 (깊은 복사는 속도가 느릴 수 있음)

✔️ **깊은 복사** (JSON.parse(JSON.stringify(obj)), structuredClone(), \_.cloneDeep())

• **중첩 객체가 있는 경우**

• **원본을 보호해야 하는 경우** (예: 불변성 유지가 중요한 React state 관리)

• **다른 코드에서 객체를 공유하는 경우** (예: Redux, Context API)
